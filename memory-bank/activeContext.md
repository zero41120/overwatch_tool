# Active Context

- No open tasks; current baseline includes Skyline Nanites 1.2x handling, tuned Juno torpedo UI/cards, and the hero power selector (4-pick limit, folding descriptions) that lives on the breakpoint/Juno card using wiki `heroPowers` data but still excluded from calculations.
- Wiki data is now bundled inside the `wiki-data-reader` workspace (Vite library build) and `itemDataProvider` consumes the exported helpers instead of running `import.meta.glob` itself.
- Snapshot + parser workflow lives under `wiki-data-reader/scripts`: run `npm run refresh-snapshots -w wiki-data-reader` to capture wiki raw pages (stadium + per-hero) and `npm run update-items -w wiki-data-reader` to preview/apply regenerated `ItemRecord` modules.
- Item modules now embed override metadata (disabled, editor overrides) directly; ItemGallery/local overrides consume the merged structure with resilient localStorage fallbacks.
- Wiki ingestion now lives in `wiki-data-reader/scripts/refreshSnapshots.ts` + `wiki-data-reader/scripts/updateItems.ts`, which fetch raw Stadium/hero pages into snapshots, parse them into `ItemRecord` modules, and preserve embedded overrides.
- Root `README.md` documents the workspace layout, snapshot workflow, and testing commands so new contributors follow the same process.
- Snapshot workflow now caches hero/general raws plus per-image wiki metadata; `ItemRecord` includes remote `iconUrl` so the optimizer uses fandom-hosted images instead of local sprites.
- Attribute dropdowns now derive types with `collectAttributeTypesForHero`, including hero-specific editor overrides even if only one item carries the attribute while filtering to the selected hero, and weight dropdown labels show per-attribute item counts; Recommendation panel regained Ally/Enemy headings plus a score test id, and wiki-data-reader declarations were rebuilt for type-checking.
- Juno builds now expose derived Mediblaster Output and Torpedo Damage attributes (Torpedo uses base + AP scaling + Skyline bonus) for weighting and minimum-value checks.
- Juno breakpoint UI now includes a mediblaster tab with situational pick highlighting and DPS breakpoints alongside torpedoes.
- Mediblaster output now optionally accounts for armor reduction (with Codebreaker armor penetration) via a new enemy-armor toggle in the weights section.
- Added a ComputedMetric base class for declarative metric inputs/outputs metadata in the optimizer UI refactor.
- Added a metric registry with multi-output support plus a Juno mediblaster metric that exposes burst/sustain outputs for weighting.
- Added a root-level Codex SDK script (`scripts/codexKanban.ts`) to feed design.md + the next kanban task into Codex for one-at-a-time execution.
- Drafted plan.md for the Mediblaster Pareto-Frontier Optimization, including DP state, pruning logic, and a verification test case.
- Replaced the mediblaster breakpoint DFS with a Pareto-frontier DP and added the non-linear synergy regression test.
- Replaced optimizer DFS pruning with a Pareto-frontier DP search that respects equipped/avoid items.
- Metric optional input controls now render from metric definitions, with input state wired through the optimizer and Juno mediblaster inputs for reload downtime tuning.
- Derived stat maps now sum raw item stats once and feed metric evaluations.
- Optimizer search now accepts selected metric outputs plus generic extra-field profile inputs, keeping DP free of weapon-specific logic.
- Optimizer build outputs now include per-metric values so scores and breakdowns can be recomputed without rerunning search.
- Added a shared scoreBuild helper to recompute weighted metric scores and breakdowns when weights change.
- Optimizer now returns all equal-score builds so the UI can choose cheapest or premium among alternatives.
